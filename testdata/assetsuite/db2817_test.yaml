testinfo:
    case_suite: db2817_test
    descrpiton: 获取资产列表接口
    module_class: Test2817
premise: ''
set_up: ''
tear_down: ''
test_case:
    - test_name: test_get_asset_db_by_name_all   #测试用例名称
      info: 资产列表按name查询全部数据 #allure story描述
      mark: smoking                    #用例执行等级
      method: GET
      url: /api/v1/assets/db
      headers:
        Authorization: $token
      timeout: 8
      params:
        type: name
        value: &name 11G备239.121
        page: 1
        per_page: 10
        group_id:
      data:
      files:
      json:
      status:
      extract:
      expects:
          http_code: 200
          body.code: 100000
          body.message: 成功
          body.result[0]: !join ['${join_sql_result(',
                                 '"','select db.id,db.cmdb_id,db.name as db_name,db.db_type,db.instance,db.status as db_status,db.deleted,db.dbversion,h.os_type as os_type,ip,h.status as host_status from db,host as h',
                                 ' where db.id = h.id and db.name =',"'",*name, "'",'"',')|tools.dbopration}']

